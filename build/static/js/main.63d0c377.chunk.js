(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{32:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(18),a=n.n(r),s=n(6),i=n(0),o=function(e){var t=e.activities;return t?Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"activities",children:[Object(i.jsx)("span",{children:"Activities:"}),t.map((function(e){return Object(i.jsx)(y,{activity:e},e.id)}))]})}):"Loading..."},u=n(12),j=n(3),l=n.n(j),b=n(10),h=n(5),d=n(2),O=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,p=function(){var e=Object(c.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),j=Object(h.a)(a,2),p=j[0],v=j[1],m=Object(c.useState)([]),S=Object(h.a)(m,2),y=S[0],C=S[1],k=Object(c.useState)(""),E=Object(h.a)(k,2),N=E[0],R=E[1],P=Object(c.useState)([]),w=Object(h.a)(P,2),A=w[0],D=w[1],L=Object(c.useState)(""),I=Object(h.a)(L,2),F=I[0],U=I[1],H=Object(d.e)(),W=function(){var e=Object(b.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/activities"),{headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent)&&r(n),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/routines"),{headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent)&&C(n),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(b.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/users/me"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(N)}});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,c=n.username,U(c),e.abrupt("return");case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),J={activities:n,setActivities:r,loggedIn:p,setLoggedIn:v,routines:y,setRoutines:C,token:N,setToken:R,userRoutines:A,setUserRoutines:D,username:F,setUsername:U};return Object(c.useEffect)((function(){try{K(),W(),B()}catch(e){console.error(e)}}),[N]),Object(c.useEffect)((function(){var e=localStorage.getItem("token");e&&(R(e),v(!0))})),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("header",{className:"site-header",children:[Object(i.jsx)("div",{className:"logo-container",children:Object(i.jsx)(s.b,{to:"/",className:"logo",children:Object(i.jsx)("h1",{children:"Fitness Tracker"})})}),Object(i.jsxs)("div",{className:"link-bar",children:[Object(i.jsx)(s.b,{to:"/",className:"nav-link ",children:"Home"}),Object(i.jsx)(s.b,{to:"/routines",className:"nav-link",children:"Routines"}),p?Object(i.jsx)(s.b,{to:"/account/routines",className:"nav-link",children:"My Routines"}):null,Object(i.jsx)(s.b,{to:"/activities",className:"nav-link",children:"Activities"}),p?Object(i.jsx)("button",{onClick:function(){R(""),v(!1),localStorage.removeItem("token"),localStorage.removeItem("username"),H.push("/")},children:"Logout"}):Object(i.jsx)(s.b,{to:"/account/login",children:"Log in"})]})]}),Object(i.jsxs)("main",{id:"content",children:[Object(i.jsx)(d.a,{exact:!0,path:"/",children:Object(i.jsx)(x,Object(u.a)({},J))}),Object(i.jsx)(d.a,{exact:!0,path:"/routines",children:Object(i.jsx)(_,Object(u.a)({},J))}),Object(i.jsx)(d.a,{exact:!0,path:"/account/routines",children:Object(i.jsx)(g,Object(u.a)({},J))}),Object(i.jsx)(d.a,{exact:!0,path:"/activities",children:Object(i.jsx)(o,Object(u.a)({},J))}),Object(i.jsx)(d.a,{exact:!0,path:"/account/login",children:Object(i.jsx)(f,Object(u.a)({},J))}),Object(i.jsx)(d.a,{exact:!0,path:"/account/register",children:Object(i.jsx)(T,Object(u.a)({},J))})]})]})},x=function(){return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{children:"Welcome to FitnessTracker"})})},v=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,f=function(e){var t=e.setLoggedIn,n=e.setToken,r=Object(c.useState)(""),a=Object(h.a)(r,2),o=a[0],u=a[1],j=Object(c.useState)(""),O=Object(h.a)(j,2),p=O[0],x=O[1],f=Object(d.e)(),m=function(){var e=Object(b.a)(l.a.mark((function e(c){var r,a,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,e.next=4,fetch("".concat(v,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:p})});case 4:return r=e.sent,e.next=7,r.json();case 7:if(a=e.sent,s=a.token,i=a.user,!s){e.next=18;break}return localStorage.setItem("token",s),localStorage.setItem("username",i.username),n(s),t(!0),u(""),x(""),f.push("./routines"),e.abrupt("return");case 18:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.error(e.t0);case 24:case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h2",{children:"Login"}),Object(i.jsxs)("form",{onSubmit:m,className:"login-form",children:[Object(i.jsx)("input",{type:"text",placeholder:"enter username",onChange:function(e){return u(e.target.value)},value:o}),Object(i.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){return x(e.target.value)},value:p}),Object(i.jsx)("button",{type:"submit",disabled:p<8,children:"Login"})]}),Object(i.jsxs)("span",{children:["Don't have an account? Click ",Object(i.jsx)(s.b,{to:"/account/register",children:"here"})," to register!"]})]})},m=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,g=function(e){var t=e.setUserRoutines,n=e.token,r=e.username,a=e.userRoutines,s=Object(c.useState)(""),o=Object(h.a)(s,2),u=o[0],j=o[1],d=Object(c.useState)(""),O=Object(h.a)(d,2),p=O[0],x=O[1],v=Object(c.useState)(!1),f=Object(h.a)(v,2),g=f[0],S=f[1],T=function(){var e=Object(b.a)(l.a.mark((function e(){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=10;break}return e.next=4,fetch("".concat(m,"/users/").concat(r,"/routines"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 4:return c=e.sent,e.next=7,c.json();case 7:a=e.sent,t(a||[]);case 10:return e.abrupt("return");case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(b.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("".concat(m,"/routines"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({name:u,goal:p,isPublic:g})});case 4:return c=e.sent,e.next=7,c.json();case 7:if(!e.sent){e.next=14;break}return j(""),x(""),S(!1),e.next=14,T();case 14:return e.abrupt("return");case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0);case 21:case 22:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(m,"/routines/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 3:return e.next=5,T();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){try{T()}catch(e){console.error(e)}}),[]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"form-container",children:[Object(i.jsx)("h2",{children:"Create a new routine:"}),Object(i.jsxs)("form",{onSubmit:_,className:"login-form",children:[Object(i.jsx)("input",{type:"text",placeholder:"Name your routine!",onChange:function(e){return j(e.target.value)},value:u}),Object(i.jsx)("input",{type:"text",placeholder:"What is your goal?",onChange:function(e){return x(e.target.value)},value:p}),Object(i.jsxs)("fieldset",{children:[Object(i.jsx)("label",{children:"Private:"}),Object(i.jsxs)("select",{name:"isPublic",placeholder:"No",value:g,onChange:function(e){return S(e.target.value)},children:[Object(i.jsx)("option",{value:"true",children:"no"}),Object(i.jsx)("option",{value:"false",children:"yes"})]})]}),Object(i.jsx)("button",{type:"submit",disabled:!u||!p,children:"Create Routine"})]})]}),a.length>0?a.map((function(e){return Object(i.jsx)(C,{routine:e,children:Object(i.jsx)("button",{onClick:function(){return y(e.id)},children:"Delete"})},e.id)})):null]})},S=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,T=function(e){var t=e.setLoggedIn,n=e.setToken,r=Object(c.useState)(""),a=Object(h.a)(r,2),o=a[0],u=a[1],j=Object(c.useState)(""),O=Object(h.a)(j,2),p=O[0],x=O[1],v=Object(c.useState)(""),f=Object(h.a)(v,2),m=f[0],g=f[1],T=Object(d.e)(),_=function(){var e=Object(b.a)(l.a.mark((function e(c){var r,a,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,e.next=4,fetch("".concat(S,"/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:p})});case 4:return r=e.sent,e.next=7,r.json();case 7:a=e.sent,s=a.token,i=a.user,s&&(localStorage.setItem("token",s),localStorage.setItem("username",i.username),n(s),t(!0),u(""),x(""),T.push("/")),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h2",{children:"Register"}),Object(i.jsxs)("form",{onSubmit:_,className:"login-form",children:[Object(i.jsx)("input",{type:"text",placeholder:"enter username",onChange:function(e){return u(e.target.value)},value:o}),Object(i.jsx)("input",{type:"password",placeholder:"enter password",onChange:function(e){return x(e.target.value)},value:p}),Object(i.jsx)("input",{type:"password",placeholder:"verify password",onChange:function(e){return g(e.target.value)},value:m}),Object(i.jsx)("button",{type:"submit",disabled:!p||!o||p.length<8||p!==m,children:"Register"})]}),Object(i.jsxs)("span",{children:["Have an account? Click ",Object(i.jsx)(s.b,{to:"/account/login",children:"here"})," to login"]}),p!==m&&Object(i.jsx)("span",{className:"no-match-alert",children:"Passwords do not match!"}),p.length<8&&Object(i.jsx)("span",{className:"no-match-alert",children:"Passwords must contain at least 8 characters!"})]})},_=function(e){var t=e.routines;return Object(i.jsx)(i.Fragment,{children:t?t.map((function(e){return Object(i.jsx)(C,{routine:e},e.id)})):"Loading..."})},y=function(e){var t=e.children,n=e.activity;return n?Object(i.jsxs)("div",{className:"activity-single",children:[Object(i.jsxs)("span",{children:["Name: ",n.name]}),Object(i.jsxs)("span",{children:["Description: ",n.description]}),t]}):"Loading..."},C=function(e){var t=e.children,n=e.routine;return n?Object(i.jsxs)("div",{className:"routine-single",children:[Object(i.jsx)("span",{children:Object(i.jsx)("h3",{children:n.name})}),Object(i.jsx)("span",{children:Object(i.jsxs)("h3",{className:"creator-name",children:["created by ",n.creatorName]})}),Object(i.jsxs)("span",{children:["Goal: ",n.goal]}),Object(i.jsxs)("span",{children:["Private: ",n.isPublic?"yes":"no"]}),t,n.activities.length>0&&Object(i.jsxs)("div",{className:"activities",children:[Object(i.jsx)("span",{children:"Activities:"}),Object(i.jsx)("ul",{className:"activities-list",children:n.activities.map((function(e){return Object(i.jsx)("li",{className:"activity-single",children:Object(i.jsx)(y,{activity:e,children:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("span",{children:["Repetition: ",e.count," times"]}),Object(i.jsxs)("span",{children:["Duration: ",e.duration," minutes"]})]})})},e.id)}))})]})]}):"Loading..."};a.a.render(Object(i.jsx)(s.a,{children:Object(i.jsx)(p,{})}),document.querySelector("#app"))}},[[32,1,2]]]);
//# sourceMappingURL=main.63d0c377.chunk.js.map